(this["webpackJsonpra_9.2_crud"]=this["webpackJsonpra_9.2_crud"]||[]).push([[0],{38:function(t,e,n){},39:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);n(33);var c=n(0),s=n.n(c),a=n(18),r=n.n(a),o=(n(38),n(6)),i=n(2),u=(n(39),n(4)),j=n(14),b=n.n(j),l=n(19);function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(c.useState)(null),s=Object(u.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(!1),i=Object(u.a)(o,2),j=i[0],d=i[1],O=Object(c.useState)(null),h=Object(u.a)(O,2),p=h[0],m=h[1];return Object(c.useEffect)((function(){(function(){var n=Object(l.a)(b.a.mark((function n(){var c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!0),n.prev=1,n.next=4,fetch(t,e);case 4:if((c=n.sent).ok){n.next=7;break}throw new Error(c.statusText);case 7:return n.next=9,c.json();case 9:s=n.sent,r(s),m(null),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),m(n.t0);case 17:return n.prev=17,d(!1),n.finish(17);case 20:case"end":return n.stop()}}),n,null,[[1,14,17,20]])})));return function(){return n.apply(this,arguments)}})()()}),[t,e]),[a,j,p]}var O=n(51),h=n(1),p=function(){return Object(h.jsx)("div",{className:"Loader__container",children:Object(h.jsx)(O.a,{active:!0,inline:"centered"})})};function m(t){var e=t.message;return Object(h.jsx)("div",{className:"Error",style:{color:"red"},children:e})}m.defaultProps={message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445!"};var f=m,x=n(13),_=n.n(x);n(47);var v=function(t){var e=t.post,n=Object(i.f)();return Object(h.jsx)("article",{className:"Post",onClick:function(){return n("/posts/".concat(e.id))},"aria-hidden":"true",children:Object(h.jsxs)("div",{className:"Post__content",children:[Object(h.jsxs)("header",{className:"Post__header",children:[Object(h.jsx)("div",{className:"Post-creator__img"}),Object(h.jsxs)("div",{className:"Post__about",children:[Object(h.jsx)("div",{className:"Post-creator__name",children:"\u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432"}),Object(h.jsx)("span",{className:"Post-creator__info",children:"\u041e\u0441\u043d\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0433\u0440\u0443\u043f\u043f\u044b"}),Object(h.jsx)("span",{className:"Post__time",children:_()(e.created).fromNow()})]})]}),Object(h.jsx)("div",{className:"Post__text",children:Object(h.jsx)("p",{children:e.content})})]})})};var N=function(){var t=d("".concat("https://ra-92-crud.herokuapp.com/posts")),e=Object(u.a)(t,3),n=e[0],c=e[1],s=e[2];return Object(h.jsxs)("section",{className:"Posts",children:[c&&Object(h.jsx)(p,{}),s&&Object(h.jsx)(f,{}),!c&&n&&n.map((function(t){return Object(h.jsx)(v,{post:t},t.id)}))]})};function P(){var t=Object(i.f)();return Object(h.jsxs)("main",{className:"Main",children:[Object(h.jsx)("section",{className:"Main-create__container",children:Object(h.jsx)("button",{className:"Main-create__button button",type:"button",onClick:function(){return t("/posts/new")},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})}),Object(h.jsx)(N,{})]})}var g=n(10),k=n(16);function y(t){var e=t.post,n=t.onSubmit,s=t.onClose,a=Object(c.useState)({content:e.content}),r=Object(u.a)(a,2),o=r[0],i=r[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{className:"Form__close",type:"button",onClick:s,children:"\u2718"}),Object(h.jsxs)("form",{className:"Form",onSubmit:function(t){t.preventDefault(),o.content&&n(o.content)},children:[Object(h.jsx)("div",{className:"Form__group",children:Object(h.jsx)("textarea",{className:"Form__textbox",name:"content",value:o.content,onChange:function(t){var e=t.target;i((function(t){return Object(k.a)(Object(k.a)({},t),{},Object(g.a)({},e.name,e.value))}))},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"})}),Object(h.jsx)("button",{className:"Form__button button",type:"submit",children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})]})]})}y.defaultProps={post:{content:""}};var C=y;function S(){var t=Object(i.f)(),e=function(){return t("/")};return Object(h.jsx)("div",{className:"NewPost__container",children:Object(h.jsx)(C,{onSubmit:function(t){fetch("https://ra-92-crud.herokuapp.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:0,content:t})}).then((function(){return e()}))},onClose:e})})}function F(){var t=Object(c.useState)(!1),e=Object(u.a)(t,2),n=e[0],s=e[1],a=d("".concat("https://ra-92-crud.herokuapp.com/posts")),r=Object(u.a)(a,1)[0],o=Object(i.g)().id,j=Object(i.f)(),b=function(){return j("/")},l=function(){return r.find((function(t){return t.id===+o}))};return Object(h.jsxs)("div",{className:"PostPage",children:[r&&!n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v,{post:l()}),Object(h.jsxs)("div",{className:"PostPage__control",children:[Object(h.jsx)("button",{className:"PostPage__button_edit button",type:"submit",onClick:function(){return s(!0)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(h.jsx)("button",{className:"PostPage__button_delete button",type:"submit",onClick:function(){fetch("".concat("https://ra-92-crud.herokuapp.com/posts","/").concat(o),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(){return b()}))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]}),r&&n&&Object(h.jsx)("div",{className:"PostPage__edit",children:Object(h.jsx)(C,{post:l(),onSubmit:function(t){fetch("https://ra-92-crud.herokuapp.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:+o,content:t})}).then((function(){return b()}))},onClose:b})})]})}function w(){return Object(h.jsx)(o.a,{basename:"/ra_9.2_crud",children:Object(h.jsx)("div",{className:"App__container",children:Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{path:"/",exact:!0,element:Object(h.jsx)(P,{})}),Object(h.jsx)(i.a,{path:"/posts/new",element:Object(h.jsx)(S,{})}),Object(h.jsx)(i.a,{path:"/posts/:id",element:Object(h.jsx)(F,{})})]})})})})}var T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),c(t),s(t),a(t),r(t)}))};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root")),T()}},[[48,1,2]]]);
//# sourceMappingURL=main.35aa0e2a.chunk.js.map